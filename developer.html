<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developer resources | Invoice Ninja</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="A to Z documentation for Invoice Ninja">
    
    <link rel="preload" href="/assets/css/0.styles.d5e81f4b.css" as="style"><link rel="preload" href="/assets/js/app.b4132558.js" as="script"><link rel="preload" href="/assets/js/2.3155da3c.js" as="script"><link rel="preload" href="/assets/js/9.7da858ba.js" as="script"><link rel="prefetch" href="/assets/js/10.be678b7e.js"><link rel="prefetch" href="/assets/js/11.1dd669a8.js"><link rel="prefetch" href="/assets/js/12.36d2d3ae.js"><link rel="prefetch" href="/assets/js/13.5bb4f1ac.js"><link rel="prefetch" href="/assets/js/14.be050e8f.js"><link rel="prefetch" href="/assets/js/15.8312939e.js"><link rel="prefetch" href="/assets/js/16.03f94d21.js"><link rel="prefetch" href="/assets/js/3.310a9523.js"><link rel="prefetch" href="/assets/js/4.f947058e.js"><link rel="prefetch" href="/assets/js/5.e109d714.js"><link rel="prefetch" href="/assets/js/6.7c4131bd.js"><link rel="prefetch" href="/assets/js/7.37adfac1.js"><link rel="prefetch" href="/assets/js/8.1a91231f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d5e81f4b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Invoice Ninja</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="http://github.com/invoiceninja/invoiceninja/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow down"></span></button> <button type="button" aria-label="Version" class="mobile-dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://invoiceninja.github.io/" target="_self" class="nav-link external">
  Master
  <!----></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="http://github.com/invoiceninja/invoiceninja/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow down"></span></button> <button type="button" aria-label="Version" class="mobile-dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://invoiceninja.github.io/" target="_self" class="nav-link external">
  Master
  <!----></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active open"><span>User Guide</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/clients.html" class="sidebar-link">Clients</a></li><li><a href="/invoices.html" class="sidebar-link">Invoices</a></li><li><a href="/products.html" class="sidebar-link">Products</a></li><li><a href="/payments.html" class="sidebar-link">Payments</a></li><li><a href="/settings.html" class="sidebar-link">Settings</a></li></ul></section></li><li><a href="/developer.html" aria-current="page" class="active sidebar-link">Developer Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developer.html#getting-started" class="sidebar-link">Getting Started.</a></li><li class="sidebar-sub-header"><a href="/developer.html#api-definition" class="sidebar-link">API Definition</a></li><li class="sidebar-sub-header"><a href="/developer.html#adding-payment-gateways" class="sidebar-link">Adding payment gateways</a></li></ul></li><li><a href="/selfhost.html" class="sidebar-link">Self Host</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="developer-resources"><a href="#developer-resources" class="header-anchor">#</a> Developer resources</h1> <p></p><div class="table-of-contents"><ul><li><a href="#getting-started">Getting Started.</a></li><li><a href="#api-definition">API Definition</a></li><li><a href="#adding-payment-gateways">Adding payment gateways</a><ul><li><a href="#step-1-setup-environment">Step 1. Setup environment</a></li><li><a href="#step-2-adding-the-gateway-into-the-gateways-table">Step 2. Adding the gateway into the gateways table</a></li></ul></li></ul></div><p></p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started.</h2> <p>The Invoice Ninja API is built on top of the <a href="laravel.com">Laravel Framework</a>, this is a hugely popular PHP framework with extensive high quality documentation and tutorials all over the web. To get started customizing and/or extending Invoice Ninja you will need to be acquainted with the latest version of Laravel and all of its features. The URL namespace for the api is <strong>/api/v1</strong> The Client Portal is a traditional web application also built with Laravel along with Livewire and Tailwind components. The URL namespace for client facing URLs is <strong>/client/</strong></p> <p>If you are planning to build new functionality in Invoice Ninja, for example a Inventory Module, rather than integrate this directly into the codebase, we highly recommend using the <a href="https://github.com/nwidart/laravel-modules">Laravel Modules</a> library. This library is already part of the Invoice Ninja core, so you can dive straight in and start building.</p> <p>If you plan to contribute your code back to the official Invoice Ninja repository, please ensure you have test coverage for your functionality. We use <a href="https://phpunit.de/">Phpunit</a> for our API testing, and <a href="https://www.cypress.io/">Cypress</a> for our UI testing of the client portal.</p> <h2 id="api-definition"><a href="#api-definition" class="header-anchor">#</a> API Definition</h2> <p>Our full API definition can be found on swagger <a href="https://app.swaggerhub.com/apis/invoiceninja/invoiceninja">here</a></p> <h2 id="adding-payment-gateways"><a href="#adding-payment-gateways" class="header-anchor">#</a> Adding payment gateways</h2> <p>Payment Driver Template.</p> <p>So you want to make a payment driver for invoice ninja, but don't know where to start? The first step would be to reach out to us directly on Slack https://invoiceninja.slack.com and have a chat to us in real time so that we can help you hit the ground running and build your driver in the most efficient way possible. Contacting us prior will also ensure that your code can be merged back into the official repository as we will be maintaining this code into the future.</p> <p>Ready? Lets go!</p> <h3 id="step-1-setup-environment"><a href="#step-1-setup-environment" class="header-anchor">#</a> Step 1. Setup environment</h3> <p>You should update your code to be up to date with the <a href="https://github.com/invoiceninja/v5-develop">v5-develop</a> branch.</p> <p>You will then want to create your own branch for for your driver ie.</p> <div class="language- extra-class"><pre class="language-text"><code>git branch my_payment_driver
</code></pre></div><h3 id="step-2-adding-the-gateway-into-the-gateways-table"><a href="#step-2-adding-the-gateway-into-the-gateways-table" class="header-anchor">#</a> Step 2. Adding the gateway into the gateways table</h3> <p>Lets create a migration file which will insert a record identifying the gateway.</p> <div class="language- extra-class"><pre class="language-text"><code>php artisan make:migration my_new_gateway
</code></pre></div><p>Let open this file and in the up() method create our new gateway record</p> <p>Init a new gateway instance</p> <div class="language- extra-class"><pre class="language-text"><code>$gateway = new Gateway;
$gateway-&gt;name = 'Fancy Gateway'; 
$gateway-&gt;key = Str::lower(Str::random(32)); 
$gateway-&gt;provider = ‘FancyGateway’;
$gateway-&gt;is_offsite = true;
$gateway-&gt;fields = new \stdClass;
$gateway-&gt;visible = true;
$gateway-&gt;site_url = ‘https://stripe.com’;
$gateway-&gt;default_gateway_type_id = 1;
$gateway-&gt;save();
</code></pre></div><h4 id="gateway-properties"><a href="#gateway-properties" class="header-anchor">#</a> Gateway Properties</h4> <ul><li>name: The name of your gateway</li> <li>key: A random 32 alphanumeric gateway key (Type: string)</li> <li>provider: This is a camel cased string which is used to initialize your payment driver. We append the string Driver to this class, so if you payment driver is FancyGatewayDriver, then your provider will be FancyGateway. (Type: string)</li> <li>is_offsite: Specifies is this payment driver redirects the user to another page to complete the payment. Paypal Express for instance redirects to Paypal, and then returns the user once the payment is completed (Type: bool)</li> <li>fields: A stdClass object of key values which defines the user settings required for the gateway, ie, Api Keys, Secrets etc. All of these fields are strings except for testMode which is a boolean and indicates whether the gateway is set to test mode. (Type stdClass)</li> <li>visible: Defines whether the gateway should be visible in the UI (Type: bool)</li> <li>site_url: A URL field which allows the user to go directly to the gateway page for further information (Type: string, url)</li> <li>default_gateway_type_id: If your gateway has multiple ways to pay, ie Credit Card, Bank Transfer etc, then you’ll want to select a default method. The list of defined methods are found on the GatewayType model as follows:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    const CREDIT_CARD = 1;
    const BANK_TRANSFER = 2;
    const PAYPAL = 3;
    const CRYPTO = 4;
    const CUSTOM = 5;
    const ALIPAY = 6;
    const SOFORT = 7;
    const APPLE_PAY = 8;
    const SEPA = 9;
    const CREDIT = 10;
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/7/2020, 4:00:36 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/settings.html" class="prev">
        Settings
      </a></span> <span class="next"><a href="/selfhost.html">
        Self Host
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b4132558.js" defer></script><script src="/assets/js/2.3155da3c.js" defer></script><script src="/assets/js/9.7da858ba.js" defer></script>
  </body>
</html>
