<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Invoice Ninja</title>
    <meta name="description" content="A to Z documentation for Invoice Ninja">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.5956ec6a.css" as="style"><link rel="preload" href="/assets/js/app.72359479.js" as="script"><link rel="preload" href="/assets/js/2.0971fd18.js" as="script"><link rel="preload" href="/assets/js/12.71b6b4ec.js" as="script"><link rel="prefetch" href="/assets/js/10.7ffeed57.js"><link rel="prefetch" href="/assets/js/11.fc1a38b4.js"><link rel="prefetch" href="/assets/js/13.f8a8cdb1.js"><link rel="prefetch" href="/assets/js/14.ef5792a8.js"><link rel="prefetch" href="/assets/js/3.5a23f80c.js"><link rel="prefetch" href="/assets/js/4.013f185e.js"><link rel="prefetch" href="/assets/js/5.89a17479.js"><link rel="prefetch" href="/assets/js/6.6bc94283.js"><link rel="prefetch" href="/assets/js/7.95089fe8.js"><link rel="prefetch" href="/assets/js/8.ed1f3398.js"><link rel="prefetch" href="/assets/js/9.ff663df8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5956ec6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Invoice Ninja</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://github.com/invoiceninja/invoiceninja/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://invoiceninja.github.io/" target="_self" rel="" class="nav-link external">
  Master
  <!----></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://github.com/invoiceninja/invoiceninja/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://invoiceninja.github.io/" target="_self" rel="" class="nav-link external">
  Master
  <!----></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><a href="/clients.html" class="sidebar-link">Clients</a></li><li><a href="/invoices.html" class="sidebar-link">Invoices</a></li><li><a href="/products.html" class="sidebar-link">Products</a></li><li><a href="/payments.html" class="sidebar-link">Payments</a></li><li><a href="/settings.html" class="sidebar-link">Settings</a></li><li><a href="/selfhost.html" class="active sidebar-link">Self Host</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/selfhost.html#server-requirements" class="sidebar-link">Server Requirements</a></li><li class="sidebar-sub-header"><a href="/selfhost.html#installing-invoice-ninja" class="sidebar-link">Installing Invoice Ninja</a></li><li class="sidebar-sub-header"><a href="/selfhost.html#trouble-shooting" class="sidebar-link">Trouble shooting</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#server-requirements">Server Requirements</a></li><li><a href="#installing-invoice-ninja">Installing Invoice Ninja</a><ul><li><a href="#method-1-download-pre-built-zip">Method 1: Download pre built zip.</a></li><li><a href="#method-2-installation-from-git">Method 2: Installation from git</a></li></ul></li><li><a href="#trouble-shooting">Trouble shooting</a><ul><li><a href="#erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute">Erroneous data format for unserializing 'Symfony\Component\Routing\CompiledRoute'</a></li><li><a href="#unable-to-connect-to-database-after-installation">Unable to connect to database after installation</a></li><li><a href="#nginx-413-request-entity-too-large">Nginx: 413 – Request Entity Too Large</a></li></ul></li></ul></div><p></p> <h1 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h1> <h2 id="server-requirements"><a href="#server-requirements" class="header-anchor">#</a> Server Requirements</h2> <p>Invoice Ninja has a few system requirements. Built on top of <a href="www.laravel.com/docs/">Laravel</a> it requires a PHP and MySQL server at a minimum with the following version and extensions installed.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You need to setup this version completely from scratch. Do not attempt to overwrite your old version of Invoice Ninja (4.x.x) with this version as the two codebases are completley different.</p></div> <ul><li>PHP &gt;= 7.3.x</li> <li>bcmath extension</li> <li>ctype extension</li> <li>fileinfo extension</li> <li>json extension</li> <li>mbstring extension</li> <li>openssl extension</li> <li>PDO extension</li> <li>tokenizer extension</li> <li>xml extension</li> <li>curl extension</li> <li>zip extension</li> <li>gmp extension</li> <li>mysqli extension</li> <li>MySQL / MariaDB Server</li></ul> <h2 id="installing-invoice-ninja"><a href="#installing-invoice-ninja" class="header-anchor">#</a> Installing Invoice Ninja</h2> <h3 id="method-1-download-pre-built-zip"><a href="#method-1-download-pre-built-zip" class="header-anchor">#</a> Method 1: Download pre built zip.</h3> <p>A prebuilt zip can be downloaded from our GitHub release page <a href="https://github.com/invoiceninja/invoiceninja/releases">here</a>. You will  need to download the package which is appended with <b>-release</b>, download the file named invoiceninja.zip.</p> <p>Unzip this file into the virtual host directory you have created.</p><p></p><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Ensure the file permission have been set to the web server user. For example in Ubuntu this is www-data if you have configured a virtual host with a root directory of <code>/var/www/html</code> you would set the ownership like this.</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> -R www-data:www-data /var/www/html
</code></pre></div><h5 id="web-server-configuration"><a href="#web-server-configuration" class="header-anchor">#</a> Web server configuration</h5> <p>A sample NGINX configuration is provided below, it assumes you have PHP 7.4 installed with the PHP FPM extension installed</p> <div class="language-bash extra-class"><pre class="language-bash"><code>server <span class="token punctuation">{</span>

listen <span class="token number">80</span><span class="token punctuation">;</span>
server_name invoiceninja.test<span class="token punctuation">;</span>
root /var/www/invoiceninja/public<span class="token punctuation">;</span>
index index.php index.html index.htm<span class="token punctuation">;</span>
client_max_body_size 20M<span class="token punctuation">;</span>

location / <span class="token punctuation">{</span>
    try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ <span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>-e <span class="token variable">$request_filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rewrite ^<span class="token punctuation">(</span>.+<span class="token punctuation">)</span>$ /index.php?q<span class="token operator">=</span> last<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location ~ <span class="token punctuation">\</span>.php$ <span class="token punctuation">{</span>
include snippets/fastcgi-php.conf<span class="token punctuation">;</span>
fastcgi_pass unix:/run/php/php7.4-fpm.sock<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location ~ /<span class="token punctuation">\</span>.ht <span class="token punctuation">{</span>
    deny all<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h5 id="database-server-configuration"><a href="#database-server-configuration" class="header-anchor">#</a> Database server configuration</h5> <p>Create a database on your MySQL compatible server and add a user that has full access to the database, database configuration is out of the scope of this article, more information can be found <a href="https://dev.mysql.com/doc/refman/8.0/en/creating-database.html">here</a></p> <h5 id="headless-chrome"><a href="#headless-chrome" class="header-anchor">#</a> Headless Chrome</h5> <p>Invoice Ninja currently relies on Headless Chrome to generate PDFs, you will need to install this by running the follow command from the project directory</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><h5 id="cron-configuration"><a href="#cron-configuration" class="header-anchor">#</a> Cron configuration</h5> <p>Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record</p> <div class="language-bash extra-class"><pre class="language-bash"><code>* * * * * <span class="token builtin class-name">cd</span> /path-to-your-project <span class="token operator">&amp;&amp;</span> php artisan schedule:run <span class="token operator">&gt;&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
</code></pre></div><p>Navigate your browser to your installation domain name address with /setup appended ie, <b>www.invoiceninja.test/setup</b> from this page you will configure your database, mailserver and the primary account user, when completed, click Submit and the app will setup your application and redirect you to the login page</p> <h3 id="method-2-installation-from-git"><a href="#method-2-installation-from-git" class="header-anchor">#</a> Method 2: Installation from git</h3> <p>For power users installing the app from Github can be done with the following steps</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/invoiceninja/invoiceninja.git

<span class="token function">git</span> checkout v2

composer update

<span class="token function">cp</span> .env.example .env

<span class="token function">npm</span> i

php artisan optimize
</code></pre></div><h5 id="cron-configuration-2"><a href="#cron-configuration-2" class="header-anchor">#</a> Cron configuration</h5> <p>Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record</p> <div class="language-bash extra-class"><pre class="language-bash"><code>* * * * * <span class="token builtin class-name">cd</span> /path-to-your-project <span class="token operator">&amp;&amp;</span> php artisan schedule:run <span class="token operator">&gt;&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
</code></pre></div><p>Configure your virtual host, create a database and point your browser to http://your.domain.com/setup and follow the bouncing ball!</p> <h2 id="trouble-shooting"><a href="#trouble-shooting" class="header-anchor">#</a> Trouble shooting</h2> <h3 id="erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute"><a href="#erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute" class="header-anchor">#</a> Erroneous data format for unserializing 'Symfony\Component\Routing\CompiledRoute'</h3> <p>The most common cause of this issue is running multiple version of PHP, if the caches are built with a different version of PHP you may see the above error as differing versions of PHP may not be interoperable on the same installation. Ensure you are running the same CLI and Web PHP version to prevent any errors</p> <h3 id="unable-to-connect-to-database-after-installation"><a href="#unable-to-connect-to-database-after-installation" class="header-anchor">#</a> Unable to connect to database after installation</h3> <p>You may need to restart the queue like this</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan queue:restart
</code></pre></div><h3 id="nginx-413-request-entity-too-large"><a href="#nginx-413-request-entity-too-large" class="header-anchor">#</a> Nginx: 413 – Request Entity Too Large</h3> <p>This error indicated that the client_max_body_size parameter in NGINX is too small, you will need to edit your nginx config and increase the size</p> <div class="language-bash extra-class"><pre class="language-bash"><code>client_max_body_size 100M<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/10/2020, 2:00:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/settings.html" class="prev">
        Settings
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.72359479.js" defer></script><script src="/assets/js/2.0971fd18.js" defer></script><script src="/assets/js/12.71b6b4ec.js" defer></script>
  </body>
</html>
