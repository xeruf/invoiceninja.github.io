(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{359:function(t,e,a){"use strict";a.r(e);var s=a(43),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#server-requirements"}},[t._v("Server Requirements")])]),a("li",[a("a",{attrs:{href:"#installing-invoice-ninja"}},[t._v("Installing Invoice Ninja")]),a("ul",[a("li",[a("a",{attrs:{href:"#method-1-download-pre-built-zip"}},[t._v("Method 1: Download pre built zip.")])]),a("li",[a("a",{attrs:{href:"#method-2-installation-from-git"}},[t._v("Method 2: Installation from git")])])])]),a("li",[a("a",{attrs:{href:"#installing-invoice-ninja-docker"}},[t._v("Installing Invoice Ninja (Docker)")])]),a("li",[a("a",{attrs:{href:"#trouble-shooting"}},[t._v("Trouble shooting")]),a("ul",[a("li",[a("a",{attrs:{href:"#erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute"}},[t._v("Erroneous data format for unserializing 'Symfony\\Component\\Routing\\CompiledRoute'")])]),a("li",[a("a",{attrs:{href:"#unable-to-connect-to-database-after-installation"}},[t._v("Unable to connect to database after installation")])]),a("li",[a("a",{attrs:{href:"#nginx-413-request-entity-too-large"}},[t._v("Nginx: 413 – Request Entity Too Large")])]),a("li",[a("a",{attrs:{href:"#pdfs-not-generating-timeouts"}},[t._v("PDFs not generating. Timeouts")])]),a("li",[a("a",{attrs:{href:"#using-multiple-versions-of-npm-node"}},[t._v("Using multiple versions of NPM / NODE")])])])])])]),a("p"),t._v(" "),a("h1",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),a("h2",{attrs:{id:"server-requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-requirements"}},[t._v("#")]),t._v(" Server Requirements")]),t._v(" "),a("p",[t._v("Invoice Ninja has a few system requirements. Built on top of "),a("a",{attrs:{href:"www.laravel.com/docs/"}},[t._v("Laravel")]),t._v(" it requires a PHP and MySQL server at a minimum with the following version and extensions installed.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("You need to setup this version completely from scratch. Do not attempt to overwrite your old version of Invoice Ninja (4.x.x) with this version as the two codebases are completely different.")])]),t._v(" "),a("ul",[a("li",[t._v("PHP >= 7.3.x")]),t._v(" "),a("li",[t._v("bcmath extension")]),t._v(" "),a("li",[t._v("ctype extension")]),t._v(" "),a("li",[t._v("fileinfo extension")]),t._v(" "),a("li",[t._v("json extension")]),t._v(" "),a("li",[t._v("mbstring extension")]),t._v(" "),a("li",[t._v("openssl extension")]),t._v(" "),a("li",[t._v("PDO extension")]),t._v(" "),a("li",[t._v("tokenizer extension")]),t._v(" "),a("li",[t._v("xml extension")]),t._v(" "),a("li",[t._v("curl extension")]),t._v(" "),a("li",[t._v("zip extension")]),t._v(" "),a("li",[t._v("gmp extension")]),t._v(" "),a("li",[t._v("mysqli extension")]),t._v(" "),a("li",[t._v("MySQL / MariaDB Server")])]),t._v(" "),a("h2",{attrs:{id:"installing-invoice-ninja"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-invoice-ninja"}},[t._v("#")]),t._v(" Installing Invoice Ninja")]),t._v(" "),a("h3",{attrs:{id:"method-1-download-pre-built-zip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-1-download-pre-built-zip"}},[t._v("#")]),t._v(" Method 1: Download pre built zip.")]),t._v(" "),a("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/i04EX7WXTVE",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),t._v(" "),a("p",[t._v("A prebuilt zip can be downloaded from our GitHub release page "),a("a",{attrs:{href:"https://github.com/invoiceninja/invoiceninja/releases"}},[t._v("here")]),t._v(". You will  need to download the package which is appended with "),a("b",[t._v("-release")]),t._v(", download the file named invoiceninja.zip.")]),t._v(" "),a("p",[t._v("Unzip this file into the virtual host directory you have created.")]),a("p"),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Ensure the file permission have been set to the web server user. For example in Ubuntu this is www-data if you have configured a virtual host with a root directory of "),a("code",[t._v("/var/www/html")]),t._v(" you would set the ownership like this.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R www-data:www-data /var/www/html\n")])])]),a("h5",{attrs:{id:"web-server-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-server-configuration"}},[t._v("#")]),t._v(" Web server configuration")]),t._v(" "),a("p",[t._v("A sample NGINX configuration is provided below, it assumes you have PHP 7.4 installed with the PHP FPM extension installed")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\nlisten "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver_name invoiceninja.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nroot /var/www/invoiceninja/public"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nindex index.php index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclient_max_body_size 20M"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nlocation / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-e "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rewrite ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ /index.php?q"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" last"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nlocation ~ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".php$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ninclude snippets/fastcgi-php.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfastcgi_pass unix:/run/php/php7.4-fpm.sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nlocation ~ /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".ht "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    deny all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"database-server-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#database-server-configuration"}},[t._v("#")]),t._v(" Database server configuration")]),t._v(" "),a("p",[t._v("Create a database on your MySQL compatible server and add a user that has full access to the database, database configuration is out of the scope of this article, more information can be found "),a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/creating-database.html"}},[t._v("here")])]),t._v(" "),a("h5",{attrs:{id:"headless-chrome"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#headless-chrome"}},[t._v("#")]),t._v(" Headless Chrome")]),t._v(" "),a("p",[t._v("Invoice Ninja currently relies on Headless Chrome to generate PDFs, you will need to install this by running the follow command from the project directory")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),a("h5",{attrs:{id:"cron-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron-configuration"}},[t._v("#")]),t._v(" Cron configuration")]),t._v(" "),a("p",[t._v("Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("* * * * * "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /path-to-your-project "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" php artisan schedule:run "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n")])])]),a("p",[t._v("Navigate your browser to your installation domain name address with /setup appended ie, "),a("b",[t._v("www.invoiceninja.test/setup")]),t._v(" from this page you will configure your database, mailserver and the primary account user, when completed, click Submit and the app will setup your application and redirect you to the login page")]),t._v(" "),a("h3",{attrs:{id:"method-2-installation-from-git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-2-installation-from-git"}},[t._v("#")]),t._v(" Method 2: Installation from git")]),t._v(" "),a("p",[t._v("For power users installing the app from Github can be done with the following steps")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/invoiceninja/invoiceninja.git\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout v2\n\ncomposer update\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" .env.example .env\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i\n\nphp artisan optimize\n")])])]),a("h5",{attrs:{id:"cron-configuration-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron-configuration-2"}},[t._v("#")]),t._v(" Cron configuration")]),t._v(" "),a("p",[t._v("Invoice Ninja relies heavily on the Laravel Scheduler, for this to operate it requires that a cron job to be configured, edit your crontab and enter the following record")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("* * * * * "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /path-to-your-project "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" php artisan schedule:run "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n")])])]),a("p",[t._v("Configure your virtual host, create a database and point your browser to http://your.domain.com/setup and follow the bouncing ball!")]),t._v(" "),a("h2",{attrs:{id:"installing-invoice-ninja-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-invoice-ninja-docker"}},[t._v("#")]),t._v(" Installing Invoice Ninja (Docker)")]),t._v(" "),a("p",[t._v("If you prefer to use Docker, we have a dedicated repository with detailed instructions on how to get started "),a("a",{attrs:{href:"https://github.com/invoiceninja/dockerfiles"}},[t._v("HERE")])]),t._v(" "),a("h2",{attrs:{id:"trouble-shooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trouble-shooting"}},[t._v("#")]),t._v(" Trouble shooting")]),t._v(" "),a("h3",{attrs:{id:"erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#erroneous-data-format-for-unserializing-symfony-component-routing-compiledroute"}},[t._v("#")]),t._v(" Erroneous data format for unserializing 'Symfony\\Component\\Routing\\CompiledRoute'")]),t._v(" "),a("p",[t._v("The most common cause of this issue is running multiple version of PHP, if the caches are built with a different version of PHP you may see the above error as differing versions of PHP may not be interoperable on the same installation. Ensure you are running the same CLI and Web PHP version to prevent any errors")]),t._v(" "),a("h3",{attrs:{id:"unable-to-connect-to-database-after-installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unable-to-connect-to-database-after-installation"}},[t._v("#")]),t._v(" Unable to connect to database after installation")]),t._v(" "),a("p",[t._v("You may need to restart the queue like this")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("php artisan queue:restart\n")])])]),a("h3",{attrs:{id:"nginx-413-request-entity-too-large"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-413-request-entity-too-large"}},[t._v("#")]),t._v(" Nginx: 413 – Request Entity Too Large")]),t._v(" "),a("p",[t._v("This error indicated that the client_max_body_size parameter in NGINX is too small, you will need to edit your nginx config and increase the size")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("client_max_body_size 100M"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"pdfs-not-generating-timeouts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pdfs-not-generating-timeouts"}},[t._v("#")]),t._v(" PDFs not generating. Timeouts")]),t._v(" "),a("p",[t._v("This may be due to some packages in the underlying subsystem not being installed which causes headless chrome to fail. In the logs you may see an error such as")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("chrome: error while loading shared libraries: libX11-xcb.so.1: cannot open shared object file: No such file or directory\n")])])]),a("p",[t._v("To fix this you will need to install packages to support xcb ")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gconf-service libasound2 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-multiple-versions-of-npm-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-multiple-versions-of-npm-node"}},[t._v("#")]),t._v(" Using multiple versions of NPM / NODE")]),t._v(" "),a("p",[t._v("If you are running mulitple versions of Node/NPM you may want to specify path to the correct version. To enable this you will need to set the environment variables as follows in the .env file")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NODE_PATH=/usr/bin...path_to_node\nNPM_PATH=/usr/bin....path_to_npm\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("After updating the .env file you will need to recache the configuration, the simplest way to do this is.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("php artisan optimize\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);